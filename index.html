<!DOCTYPE html>
<html>
	<head>
		<!-- 
INCLUDES OF THE SAFEFRAMES FRAMEWORK 
These script files should be hosted on your CDN from a different 
top level domain from the host site.
-->
<!-- local version 
	<script type="text/javascript" src="../../src/js/lib/base.js"></script>
    <script type="text/javascript" src="../../src/js/host/host.js"></script>
    <script type="text/javascript" src="../../src/js/lib/boot.js"></script>
-->
	
<script type="text/javascript" 
	src="https://s3-us-west-2.amazonaws.com/safeframe/refimpl/1-0-3/js/lib/base.js"></script>
<script type="text/javascript" 
	src="https://s3-us-west-2.amazonaws.com/safeframe/refimpl/1-0-3/js/host/host.js"></script>
<script type="text/javascript" 
	src="https://s3-us-west-2.amazonaws.com/safeframe/refimpl/1-0-3/js/lib/boot.js"></script>


<script type='text/x-safeframe' class='sf_data'>
	{
		"id": "billboardAd",
		"src": "https://aaustin.github.io/safeframe-example.html",
		
		"conf":
		{
			"w":		300,
			"h":		250,
			"dest":	"billboardAdDiv",
			"supports" : {
				"exp-push" : "1",
				"read-cookie" : "1",
				"write-cookie" : "1"
			}
			
		}
	}
</script>

<script type="text/javascript">
function posMessageCallback(id, msgName, data){
	if(msgName == "error"){
		var log = document.getElementById("logger");
		var msg = ["error in ad ", id];
		if(data && data.errors){
			msg.push(data.errors);
		}
		msg.push("<br/>");
		log.innerHTML += msg.join("");
	}
}

/**
* Initialize a new SafeFrames publisher configuration
*/
	(function() {
		var conf	= new $sf.host.Config({
			// Should be absolute path to render file hosted on CDN "../../src/html/r.html",
			// "http://s3-us-west-2.amazonaws.com/safeframe/refimpl/1-0-3/html/r.html", 
			renderFile:	"https://aaustin.github.io/safeframe-example.html", 
			onPosMsg: posMessageCallback,
			positions: {}
		});

	})();


</script>

		<script type="text/javascript">
			/*(function(b,r,a,n,c,h,_,s,d,k){if(!b[n]||!b[n]._q){for(;s<_.length;)c(h,_[s++]);d=r.createElement(a);d.async=1;d.src="build.min.js";k=r.getElementsByTagName(a)[0];k.parentNode.insertBefore(d,k);b[n]=h}})(window,document,"script","branch",function(b,r){b[r]=function(){b._q.push([r,arguments])}},{_q:[],_v:1},"addListener applyCode banner closeBanner creditHistory credits data deepview deepviewCta first getCode init link logout redeem referrals removeListener sendSMS setBranchViewData setIdentity track validateCode".split(" "), 0);
			branch.init('key_live_khrnIbo4f9d3nIShirL0umelyEgHY8P8');
			// define the deepview structure
			branch.deepview(
			    {
			      'channel': 'mobile_web',
			      'feature': 'deepview',
			      data : {
			        '$uri_redirect_mode': '2',
			        '$deeplink_path': 'page/1234',
			        'user_profile': '7890',
			        'page_id': '1234',
			        'custom_data': 1234
			      }
			    },
			    {
			      'open_app': true  // If true, Branch attempts to open your app immediately when the page loads. If false, users will need to press a button. Defaults to true
			 });*/




			var uri = "branchsters://open?link_click_id=1234";
			var appstore = "https://itunes.apple.com/us/app/branch-monster-factory/id917737838";
			var marketstore = "market://details?id=io.branch.branchster";
			var intent = "intent://open?link_click_id=407311609566053379#Intent;scheme=branchsters;package=io.branch.branchster;S.browser_fallback_url=https%3A%2F%2Fplay.google.com%2Fstore%2Fapps%2Fdetails%3Fid%3Dio.branch.branchster&referrer=link_click_id%3D407311609566053379;S.market_referrer=link_click_id%3D407311609566053379;end";
			var url = "https://branchster.app.link/9G1IKHWGME";
			var fallback_url = "https://branch.io";
			
			window.onload = function() {
				//document.getElementById('x').src = uri;
			

				//window.open(uri, "_self");
				//window.location = appstore;
				//setTimeout(function() {
					//var currLoc = window.location;
					
				//window.location = uri;	
					//document.getElementById('z').click();
					// alert("launching app");
				//setTimeout(function() {
				//	window.location = marketstore;
				//	document.getElementById('x').src = marketstore;
				//	document.getElementById('x').src = appstore;
				
				//}, 500);
				//}, 150);

				document.getElementById('a').onclick = function() {
					//document.getElementById('x').src = url;
					window.open(appstore, "_self");
					return false;
				};
				document.getElementById('b').onclick = function() {
					window.open("itms-apps://itunes.apple.com/app/id917737838", "_self");
					return false;
				};
				document.getElementById('c').onclick = function() {
					window.open(url, "_self");
					return false;
				};
				document.getElementById('d').onclick = function() {
					document.getElementById('y').src = url;
					return false;
				};
				document.getElementById('e').onclick = function() {
					window.open(url);
					return false;
				};
				document.getElementById('f').onclick = function() {
					document.getElementById('x').src = url;
					setTimeout(function() {
						document.getElementById('x').src = appstore;
					}, 250);
					
				/*var a = "open?link_click_id=109714037020821818";
				var b = "branchtest://";
				var d = "market://details?id=io.branch.branchandroiddemo";

				setTimeout(function() {
					window.location = b + a;
				}, 650);
				setTimeout(function() {
					window.location = d;
				}, 500);
					return false;*/
				};
				document.getElementById('g').onclick = function() {
		
					setTimeout(function() {
					setTimeout(function() {
						window.location = uri;
					}, 250);
					window.location = marketstore;
					}, 250);
					return false;
				};
			};
		</script>
	</head>
	<body>
		<div id="adUnitWrapper" >
		<div id="billboardAdDiv"></div>
		</div>
		<h1>
		<a id="z" href="branchsters://open?link_click_id=1234">Direct branchster://</a><br />
		<a href="https://itunes.apple.com/us/app/branch-monster-factory/id917737838">Direct App Store</a><br />
		<a href="market://details?id=io.branch.branchster">Direct Play Store Market</a><br />
		<a href="intent://open?link_click_id=407311609566053379#Intent;scheme=branchsters;package=io.branch.branchster;S.browser_fallback_url=https%3A%2F%2Fplay.google.com%2Fstore%2Fapps%2Fdetails%3Fid%3Dio.branch.branchster&referrer=link_click_id%3D407311609566053379;S.market_referrer=link_click_id%3D407311609566053379;end">Branch MF Intent With Fallback</a><br />
		<a href="intent://open?link_click_id=407311609566053379#Intent;scheme=branchsters;package=io.branch.branchster;S.browser_fallback_url=https%3A%2F%2Fplay.google.com%2Fstore%2Fapps%2Fdetails%3Fid%3Dio.branch.branchster&referrer=link_click_id%3D407311609566053379;S.browser_fallback_url=https%3A%2F%2Fwww.airbnb.fr%2Frooms%2F15221932%3Feal_exp%3D1504994509%26eal_sig%3D2ba01c29e7c5d340cc8601c9ab3ee91d29edfc1630e955a5e1e891ac496af9ab%26eal_uid%3D77526412%26eluid%3D1%26euid%3D3626613a-78aa-13f0-9f0f-a65ebb4fb10d%26%25243p%3De_eml%26%2524deeplink_path%3Dairbnb%253A%252F%252Fd%252Flisting%253Fid%253D15221932%26%2524original_url%3Dhttps%253A%252F%252Fwww.airbnb.fr%252Frooms%252F15221932%253Feal_exp%253D1504994509%2526eal_sig%253D2ba01c29e7c5d340cc8601c9ab3ee91d29edfc1630e955a5e1e891ac496af9ab%2526eal_uid%253D77526412%2526eluid%253D1%2526euid%253D3626613a-78aa-13f0-9f0f-a65ebb4fb10d%26campaign%3Drookery%26_branch_match_id%3D417084184557122828;S.market_referrer=link_click_id%3D407311609566053379;end">Branch MF Intent No Fallback</a><br />
		<a href="#" id="a">window open self app store https</a><br />
		<a href="#" id="b">window open self app store itms</a><br />
		<a href="#" id="c">window open self universal link</a><br />
		<a href="#" id="d">img src</a><br />
		<a href="#" id="e">window open</a><br />
		<a href="#" id="f">dynamic 1</a><br />
		<a href="#" id="g">dynamic 2</a><br />

		<br />
		<br />
		Test Links
		<br />

		<a href="https://qla7-maephet.branchbeta.link/VUQ193nXNC">App/Play Store Link</a><br />
		<a href="https://qla7-maephet.branchbeta.link/XDVvPytXNC">Fallback Link</a><br />
		<a href="https://qla7-maephet.branchbeta.link/Bea43hxXNC">Deepview Link</a><br />
		<a href="https://qla7-maephet.branchbeta.link/e/FgKrMlzDGE">Web Only Link</a><br />

		<a href="https://qla7-maephet.branchbeta.link/QDQxzFflxF">App/Play Store Link - Redirect Mode 1</a><br />
		<a href="https://qla7-maephet.branchbeta.link/DEFFDNolxF">Fallback Link - Redirect Mode 1</a><br />
		<a href="https://qla7-maephet.branchbeta.link/bsP4forlxF">Deepview Link - Redirect Mode 1</a><br />
		<a href="https://qla7-maephet.branchbeta.link/e/A4rNCrulxF">Web Only Link - Redirect Mode 1</a><br />

		<a href="https://qla7-maephet.branchbeta.link/YCYoM1ylxF">App/Play Store Link - Redirect Mode 2</a><br />
		<a href="https://qla7-maephet.branchbeta.link/Rkc3tsAlxF">Fallback Link - Redirect Mode 2</a><br />
		<a href="https://qla7-maephet.branchbeta.link/7K4QBVBlxF">Deepview Link - Redirect Mode 2</a><br />
		<a href="https://qla7-maephet.branchbeta.link/e/EzPpU3ClxF">Web Only Link - Redirect Mode 2</a><br />

		<a href="https://branchster.app.link/Kyuh7oXsLE">Live BMF Link: Boopers</a><br />

		<br />
		<br />
		Yelp Test Links
		<br />
		<a href="intent://biz/G8gnLXjHU-c7rf5Oiksqwg?link_click_id=431889510703343984#Intent;scheme=yelp-app-indexing;package=com.yelp.android;S.browser_fallback_url=https%3A%2F%2Fplay.google.com%2Fstore%2Fapps%2Fdetails%3Fid%3Dcom.yelp.android&referrer=link_click_id-431889510703343984;S.market_referrer=link_click_id-431889510703343984&%24deeplink_path%3D%2Fbiz%2FG8gnLXjHU-c7rf5Oiksqwg%26%24uri_redirect_mode%3D2%26%24always_deeplink%3Dtrue;end">Yelp Intent Normal</a><br />
		<a href="intent://biz/G8gnLXjHU-c7rf5Oiksqwg#Intent;scheme=yelp-app-indexing;package=com.yelp.android;S.browser_fallback_url=https%3A%2F%2Fplay.google.com%2Fstore%2Fapps%2Fdetails%3Fid%3Dcom.yelp.android&referrer=link_click_id-431889510703343984;S.market_referrer=link_click_id-431889510703343984&%24deeplink_path%3D%2Fbiz%2FG8gnLXjHU-c7rf5Oiksqwg%26%24uri_redirect_mode%3D2%26%24always_deeplink%3Dtrue;end">Yelp Intent No Query Param</a><br />
		<a href="intent://biz/G8gnLXjHU-c7rf5Oiksqwg?link_click_id=431889510703343984#Intent;scheme=yelp-app-indexing;package=com.yelp.android;S.market_referrer=link_click_id-431889510703343984&%24deeplink_path%3D%2Fbiz%2FG8gnLXjHU-c7rf5Oiksqwg%26%24uri_redirect_mode%3D2%26%24always_deeplink%3Dtrue;end">Yelp Intent No Fallback</a><br />
		<a href="intent://biz/G8gnLXjHU-c7rf5Oiksqwg?link_click_id=431889510703343984#Intent;scheme=yelp-app-indexing;package=com.yelp.android;S.browser_fallback_url=https%3A%2F%2Fplay.google.com%2Fstore%2Fapps%2Fdetails%3Fid%3Dcom.yelp.android&referrer=link_click_id-431889510703343984;end">Yelp Intent No Referer</a><br />
		<a href="intent://biz/G8gnLXjHU-c7rf5Oiksqwg?link_click_id=431889510703343984#Intent;scheme=yelp-app-indexing;package=com.yelp.android;end">Yelp Intent No Fallback or Referrer</a><br />
		<a href="intent:///biz/G8gnLXjHU-c7rf5Oiksqwg#Intent;scheme=yelp-app-indexing;package=com.yelp.android;end">Yelp Intent No Fallback or Referrer or Query Params</a><br />
		<a href="yelp-app-indexing://biz/G8gnLXjHU-c7rf5Oiksqwg">Yelp URI Scheme</a><br />
		<a href="yelp://annotate/biz/G8gnLXjHU-c7rf5Oiksqwg">Yelp Annotate URI Scheme</a><br />
		</h1>

		<iframe id="x"></iframe>
		<img id="y" />
	</body>
</html>